<!--
  Title: login.component.html
  Author: Thomas Schultz, Jamal Damir, Carl Logan, Walter McCue
  Contributors: Thomas Schultz, Jamal Damir, Carl Logan, Walter McCue
  Date: 04/16/23
  Last Modified by: Jamal Damir
  Last Modification Date: 04/18/23
  Description: html for the bcrs project
-->

<div fxLayout="column">
  <mat-card
    fxFlex
    class="login-container w-50"
    n
    style="margin-top: 150px; border-radius: 10px"
  >
    <mat-card-header class="header">
      <!-- Page Title-->
      <mat-card-title class="login-title"> Employee Login</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!-- Display error messages-->
      <p-messages
        [(value)]="errorMessages"
        [enableService]="false"
      ></p-messages>
      <mat-card class="mat-elevation-z0">
        <!-- Username and password form-->
        <form [formGroup]="loginForm" (ngSubmit)="login(); loginForm.reset()">
          <mat-card-content>
            <mat-form-field appearance="outline">
              <input
                type="text"
                matInput
                formControlName="userName"
                placeholder="   Username"
              />

              <!-- Error Handling -->
              <mat-error
                *ngIf="
                  loginForm.controls['userName'].hasError('required') &&
                  loginForm.controls['userName'].touched
                "
              >
                Username is a required field.
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <input
                matInput
                type="password"
                formControlName="password"
                placeholder="   Password"
              />

              <!-- Error handling-->
              <mat-error
                *ngIf="
                  loginForm.controls['password'].hasError('required') &&
                  loginForm.controls['password'].touched
                "
              >
                Password is a required field.
              </mat-error>

              <mat-error
                *ngIf="
                  loginForm.controls['password'].hasError('pattern') &&
                  loginForm.controls['password'].touched
                "
              >
                Password must be at least 8 characters, contain one letter, and
                one number.
              </mat-error>
            </mat-form-field>
          </mat-card-content>

          <!-- Form submission button-->
          <mat-card-actions>
            <button
              type="submit"
              mat-raised-button
              [disabled]="!loginForm.valid"
            >
              Log in
            </button>
          </mat-card-actions>
          <hr />

          <!-- Account creations and password reset anchors-->
          <div class="create-account">
            <a [routerLink]="" (click)="passwordReset()" class=""
              >Forgot Password?</a
            >
            <a [routerLink]="" (click)="createAccount()" class=""
              >Create Account</a
            >
          </div>
        </form>
      </mat-card>
    </mat-card-content>
  </mat-card>
</div>
